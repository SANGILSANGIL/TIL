



힙 메모리의 가장 중요한 점은 가비지 컬렉션이다.

한번 할당후 수거해야만 메모리를 효율적으로 사용할수 있기 떄문이다.

문제는 가비지 컬렉션에 오버헤드가 생긴다.

먼저 가용 메모리 블록의 연결 리스트를 유지한다.

리스트의 각 가용 메모리 블록은 두개의 더블워드 값을 사용한다. 하나는 가용 블록의 크기 하나는 다음 가용 블록의 주소


![http://wiki.geeekdev.com/lib/exe/fetch.php?cache=&media=wiki:img_4462.jpg](http://wiki.geeekdev.com/lib/exe/fetch.php?cache=&media=wiki:img_4462.jpg)

시스템은 링크 포인터에 NULL을 넣고 크기 필드에는 힙의 전체 가용 공간의 크기를 답아서 힙을 초기화 한다.

메모리 요청이 올떄 힙 관리자는 먼저 할당 요청에 적합한 충분히 큰 블록이 있는지를 살핀다. 
이를 위해 리스트의 끝까지 탐색해야 한다.

최초 탐색일 경우엔 해당 메모리가 들어갈수 있는 공간이 나오면 바로 할당해준다. 
( 문제는 엄청 크게 들어갈수 잇는데도 그냥 할당하며 메모리를 낭비 할수 있다. 이때문에 외부 단편화가 발생한다)

최적 탐색일 경우엔 알맞은 메모리 공간을 확보하지만 탐색시 시간이 더 걸린다.
